package nivia.modules.exploits;

import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityItem;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import nivia.events.EventTarget;
import nivia.events.events.EventPacketReceive;
import nivia.events.events.EventTick;
import nivia.modules.Module;
import nivia.utils.Helper;

public class InstantPickup extends Module {
	public InstantPickup() {
		super("InstantPickup", 0, 0xFFFFFF, Category.EXPLOITS, "Prevents anticheats setting your rotations.", new String[] { "norotation", "nrotate", "nr", "nor" }, true);
	}


	
    public Entity getItems(double range) {
        Entity tempEntity = null;
        double dist = range;
        for (final Object i : mc.theWorld.loadedEntityList) {
            final Entity entity = (Entity)i;
            if (mc.thePlayer.onGround && mc.thePlayer.isCollidedVertically && entity instanceof EntityItem) {
                final double curDist = mc.thePlayer.getDistanceToEntity(entity);
                if (curDist > dist) {
                    continue;
                }
                dist = curDist;
                tempEntity = entity;
            }
        }
        return tempEntity;
    }
    
    @EventTarget
    public void onPreTick(EventTick e) {
            final Entity items = this.getItems(1.0);
            if (items != null) {
                for (int i = 0; i < 200; ++i) {
                    mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer());
                }
            }
    }
    
}
